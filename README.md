# しらたき

CeVIO AIを使用して音声を生成するREST APIです。Windows環境で動作し、CeVIO AIがインストールされている必要があります。

## 機能

- テキストから音声を生成
- 音声パラメータ(音量、速度、トーンなど)の調整
- 感情パラメータの設定
- サンプル音声の生成

## エンドポイント

### 1. サンプル音声生成

```
POST /voice/sample
```

指定したキャストのサンプル音声("こんにちは、[キャスト名]です。")を生成します。

**リクエスト例:**
```json
{
    "cast": "花隈千冬"
}
```

### 2. カスタム音声生成

```
POST /voice/create
```

指定したテキストとパラメータで音声を生成します。生成されたWAVファイルをストリームで返します。

**リクエスト例:**
```json
{
    "cast": "花隈千冬",
    "text": "こんにちは、これはテスト音声です。",
    "voiceControl": {
        "volume": 50,
        "speed": 50,
        "tone": 50,
        "toneScale": 50,
        "alpha": 50
    },
    "emotions": [
        {
            "name": "嬉しい",
            "value": 50
        }
    ]
}
```

**レスポンス:**
- 成功時: audio/wav形式の音声データ
- エラー時:
  ```json
  {
      "error": "エラーメッセージ"
  }
  ```

### 3. 感情名取得

```
GET /voice/emotionName
```

指定したキャストで利用可能な感情名の一覧を取得します。

**クエリパラメータ:**
- `cast`: キャスト名

**レスポンス例:**
```json
[
    "嬉しい",
    "普通",
    "怒り",
    "哀しみ",
    "落ち着き"
]
```

## 環境設定

1. CeVIO AIのインストールが必要です
2. Windows環境で動作します
3. Python、Visual Studio Communityから、C++開発によるデスクトップ開発をインストールしてください
4. 環境変数`OUTPUT_PATH`で音声ファイルの出力先を指定可能（未設定時は`./tmp`）

## 起動方法

1. 依存パッケージのインストール:
```bash
npm install && npm run build
```

2. サーバー起動:
```bash
npm start
```

デフォルトポートは3000です。`.env`ファイルで変更可能です。
